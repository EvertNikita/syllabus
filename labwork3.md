[Назад к главной странице курса](https://github.com/db2015ss/syllabus)

## 3. Создание базы данных в СУБД SQLite

### Цель работы

Освоение синтаксиса операторов DDL и DML. Приобретение навыков использование команд языка SQL для создания базы данных с заданной схемой и управления данными в ней.

### Теоретические сведения

Предварительно ознакомиться: материалы лекции по командам CREATE TABLE и INSERT.

При выполнении данной работы настоятельно рекомендуется пользоваться сведениями из учебного пособия по SQlite [1].

SQLite — легковесный реляционный движок; представляет собой встраиваемую в приложение библиотеку, и не работает по схеме "клиент-сервер". SQLite широко используется в прикладных приложениях, в том числе на мобильных платформах, в качестве средства хранения данных. С учетом легкости установки, отсутствия необходимости настройки и неплохой поддержки стандарта SQL, данная СУБД хорошо подходит для использования в учебных целях.

Лабораторную работу рекомендуется выполнять в программе SQLiteSpy, но допустимо использование других клиентов.

Особенностью движка SQLite является выключенное по умолчанию ограничение ссылочной целостности (не производится форсирование внешних ключей). Это объясняется стремлением сохранить обратную совместимость с приложениями, написанными для более старых версий библиотеки (поддержка внешних ключей была реализована в SQLite начиная с версии 3.6.19 в 2009 году). В академических целях необходимо в самом начале скрипта принудительно включить форсирование внешних ключей командой

```sql
PRAGMA foreign_keys = ON;
```

Скрипт лабораторной работы представляет собой одиночный текстовый файл, структурированный следующим образом:

* Команда включения внешних ключей
* Команды очистки схемы данных (DROP TABLE)
* Команды создания схемы данных (CREATE TABLE)
* Команды заполнения базы данных данными (INSERT)

Таблицы желательно заполнять данными с учетом ограничений ссылочной целостности, т.е. сначала главные, а затем подчиненные. Иными словами, вначале заполняются данными таблицы, на которые указывают ссылки, а затем — таблицы, которые содержат ссылки. В этом случае ссылки при добавлении в подчиненные таблицы будут валидными и не вызовут нарушений целостности.

Команды очистки схемы данных необходимы для удобства исполнения скрипта целиком и в случае, если в схему данных были внесены изменения и надо перегенерировать ее. При этом нужно помнить, что если в таблицах уже содержатся данные, при удалении таблиц будут форсироваться ограничения ссылочной целостности (не будет позволено удалить таблицу, если существуют данные, которые ссылаются на данные из удаляемой таблицы). Чтобы гарантированно удалить все таблицы и перегенерировать схему и данные, следует придерживаться определенного порядка, а именно противоположного их созданию: сначала имеет смысл удалять подчиненные таблицы, содержащие ссылки, и лишь затем — главные таблицы, на которые те ссылались.

### План выполнения

__Внимание!__

Для этой работы предусмотрена онлайн-сдача. Это означает, что для ее сдачи необходимо использовать [данные инструкции](https://github.com/db2015ss/syllabus/blob/master/git.md).

1. Реализовать реляционную схему, полученную в ЛР1, операторами DDL языка SQL в SQLite (с помощью SQLiteSpy или другого приложения, использующего движок SQLite).
*  Командой PRAGMA включить проверку ограничения ссылочной целостности.
*  Осуществить проверку ограничений в соответствии с индивидуальным вариантом ЛР2 средствами языка SQL.
*  Операторами INSERT языка SQL заполнить базу данных данными, позволяющими удостовериться в работоспособности ограничений реляционной модели и пользовательских ограничений.
*  Оформить отчет.

### Содержание отчета

1. Титульный лист.
2. Цель работы.
3. Индивидуальный вариант задания.
4. Снимок экрана реляционной схемы в Microsoft Access.
5. Листинг скрипта SQL создания и заполнения базы данных.
6. Выводы.

### Вспомогательные материалы

1. [Учебное пособие по работе с SQLite в SQLiteSpy](https://www.dropbox.com/s/p24ewmuryv46a4i/SQLite.pdf)

### Вопросы к защите

*   Объясните синтаксис и семантику оператора CREATE TABLE.
*   Объясните синтаксис и семантику оператора INSERT.
*   В чем проявляется то, что SQLite проверяет ссылочную целостность данных?
*   В чем отличие двух потенциальных ключей a и b от составного потенциального ключа (a, b)?
*   В чем отличие двух внешних ключей a и b от составного внешнего ключа (a, b)?
*   Объясните принцип работы ограничения X.

[Назад к главной странице курса](https://github.com/db2015ss/syllabus)
